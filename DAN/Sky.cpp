//===================================================================================================================================
//ySky.cppz
// [ì¬ŽÒ]HAL“Œ‹žGP12A332 11 ›–ì Ž÷
// [ì¬“ú]2019/10/20
// [XV“ú]2019/10/23
//===================================================================================================================================

//===================================================================================================================================
//yƒCƒ“ƒNƒ‹[ƒhz
//===================================================================================================================================
#include "Sky.h"

//===================================================================================================================================
//yƒRƒ“ƒXƒgƒ‰ƒNƒ^z
//===================================================================================================================================
Sky::Sky() {
	renderer = new StaticMeshRenderer(staticMeshNS::reference(staticMeshNS::SKY_DOME));
	renderer->disableLight();
	initialize();
};

//===================================================================================================================================
//yƒfƒXƒgƒ‰ƒNƒ^z
//===================================================================================================================================
Sky::~Sky() {
	SAFE_DELETE(object);
	SAFE_DELETE(renderer);
};

//===================================================================================================================================
//y‰Šú‰»z
//===================================================================================================================================
void Sky::initialize() {
	object = new Object();
	object->initialize(&D3DXVECTOR3(0, 0, 0));
	object->scale = D3DXVECTOR3(15,15,15);
	object->anyAxisRotation(D3DXVECTOR3(0, 1, 0), 180);
	renderer->registerObject(object);
	needUpdate = true;
};

//===================================================================================================================================
//yXVz
//===================================================================================================================================
void Sky::update()
{
	if (!needUpdate)return;
	object->update();
	renderer->update();
	needUpdate = false;
}

//===================================================================================================================================
//y•`‰æz
//===================================================================================================================================
void Sky::render(D3DXMATRIX view, D3DXMATRIX projection, D3DXVECTOR3 cameraPositon)
{
	renderer->render(*shaderNS::reference(shaderNS::INSTANCE_STATIC_MESH), view, projection, cameraPositon);
}
