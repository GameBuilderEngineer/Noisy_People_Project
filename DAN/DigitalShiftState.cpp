//===================================================================================================================================
//ÅyDigitalShiftState.cppÅz
// [çÏê¨é“]HALìåãûGP12A332 11 êõñÏ é˜
// [çÏê¨ì˙]2019/11/17
// [çXêVì˙]2019/11/17
//===================================================================================================================================

//===================================================================================================================================
//ÅyÉCÉìÉNÉãÅ[ÉhÅz
//===================================================================================================================================
#include "DigitalShiftState.h"
#include "NormalState.h"

//===================================================================================================================================
//ÅyusingêÈåæÅz
//===================================================================================================================================
using namespace playerNS;
using namespace digitalShiftNS;

//===================================================================================================================================
//ÅyÉRÉìÉXÉgÉâÉNÉ^Åz
//===================================================================================================================================
DigitalShiftState::DigitalShiftState(Player* player):AbstractState()
{
	//ã§í çÄñ⁄
	this->player = player;
	stateTimer	= 0.0f;
	type		= DIGITAL_SHIFT;
	nextType	= NORMAL;
	stateName	= "DIGITAL_SHIFT";
	onTrans		= false;
	player->setValidOperation(
		DISABLE_OPERATION		//ëÄçÏïsî\
	);
	//å≈óLçÄñ⁄
	shiftTimer = 0.0f;			//ÉVÉtÉgéûä‘
}

//===================================================================================================================================
//ÅyÉfÉXÉgÉâÉNÉ^Åz
//===================================================================================================================================
DigitalShiftState::~DigitalShiftState()
{
	
}

//===================================================================================================================================
//ÅyäJénèàóùÅz
//===================================================================================================================================
void DigitalShiftState::start()
{
}

//===================================================================================================================================
//ÅyçXêVÅz
//===================================================================================================================================
void DigitalShiftState::update(float frameTime)
{
	this->frameTime = frameTime;
	stateTimer += frameTime;
	shiftTimer += frameTime;

	if (EFFECT_TIME > effectTimer && effectTimer >= 0.0f )
	{
		effectTimer += frameTime;
	}
	else if(EFFECT_TIME > 0.0f){
		//ÉGÉtÉFÉNÉgå„ÉfÉWÉ^ÉãÉVÉtÉgÇé¿çs
		player->executionDigitalShift();
		effectTimer = -1.0f;
	}


	//èÛë‘ëJà⁄
	if (shiftTimer > SHIFT_TIME)
	{
		player->transState(NORMAL); return;//í èÌèÛë‘Ç…ñﬂÇÈ
	}


}

//===================================================================================================================================
//ÅyëÄçÏÅz
//===================================================================================================================================
void DigitalShiftState::operation()
{
	// ëÄçÏ
}

//===================================================================================================================================
//Åyï®óùèàóùÅz
//===================================================================================================================================
void DigitalShiftState::physics()
{

}

//===================================================================================================================================
//Åyï®óùèàóùÅz
//===================================================================================================================================
void DigitalShiftState::controlCamera()
{
	player->controlCamera(frameTime);
}

//===================================================================================================================================
//ÅyèÛë‘ëJà⁄Åz
//===================================================================================================================================
AbstractState* DigitalShiftState::transition()
{
	return new normalNS::NormalState(player);
}

//===================================================================================================================================
//ÅyèIóπèàóùÅz
//===================================================================================================================================
void DigitalShiftState::end()
{

}



